@model IEnumerable<Crowdfunding.Models.Project>

@{
    ViewData["Title"] = "Index";
}

<h1>Index</h1>

<p>
    <a asp-action="Create">Create New Project</a>
</p>

<form method="get" asp-action="Index">
    <div>

        <label>Search Projects</label>
        <input type="text" name="searchString" value="@ViewData["CurrentSearch"]" placeholder="Search Projects..." />

        <label for="category">Category: </label>\
        <select name="category" onchange="this.form.submit()">

            <option value="">All</option>
            @foreach (var cat in ViewBag.Categories as List<string>)
            {
                <option value="@cat" selected="@(cat == ViewData["CurrentCategory"]?.ToString() ? "selected" : null)">@cat</option>

            }
        </select>

        <label for="sortOrder">Sort By: </label>\
        <select name="sortOrder" onchange="this.form.submit()">
            <option value="">Title</option>
            <option value="popular" selected="@(ViewData["CurrentSort"]?.ToString() == "popular" ? "selected" : null)">Most Popular</option>
            <option value="recent" selected="@(ViewData["CurrentSort"]?.ToString() == "recent" ? "selected" : null)">Recent</option>
        </select>


        <label for="fundingStatus">Funding Status: </label>
        <select name="fundingStatus" onchange="this.form.submit()">
            <option value="">All</option>
            <option value="Funded" selected="@(ViewData["CurrentFundingStatus"]?.ToString() == "Funded" ? "selected" : null)">Funded</option>
            <option value="Unfunded" selected="@(ViewData["CurrentFundingStatus"]?.ToString() == "Unfunded" ? "selected" : null)">Un-Funded</option>
        </select>

    </div>







</form>

<table class="table">
    <thead>
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.Creator)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Title)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Description)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Category)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.FundingGoal)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.CurrentFunding)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.StartDate)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.EndDate)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Status)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.MediaUrls)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.DateCreated)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.LastUpdated)
            </th>
            <th></th>
        </tr>
    </thead>
    <tbody>
@foreach (var item in Model) {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.Creator.Id)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Title)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Description)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Category)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.FundingGoal)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.CurrentFunding)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.StartDate)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.EndDate)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Status)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.MediaUrls)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.DateCreated)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.LastUpdated)
            </td>
            <td>
                <a asp-action="Edit" asp-route-id="@item.ProjectID">Edit</a> |
                <a asp-action="Details" asp-route-id="@item.ProjectID">Details</a> |
                <a asp-action="Delete" asp-route-id="@item.ProjectID">Delete</a>
            </td>
        </tr>
}
    </tbody>
</table>
